---    
- name: Install general certs
  apt: name={{ item }} state=present
  with_items:
    - ca-certificates

- name: Create a ca-certs directory
  become: true
  file: path=/usr/local/share/ca-certificates/cacert.org state=directory

- name: Download CA Certs root certificate
  become: true
  get_url: url=http://www.cacert.org/certs/root.crt dest=/usr/local/share/ca-certificates/cacert.org/root.crt

- name: Download CA Certs class 3 certificate
  become: true
  get_url: url=http://www.cacert.org/certs/class3.crt dest=/usr/local/share/ca-certificates/cacert.org/class3.crt

- name: Update certificates
  become: true
  shell: /usr/sbin/update-ca-certificates -f

- name: Add docker apt keys
  apt_key:
    state: present
    keyserver: hkp://p80.pool.sks-keyservers.net:80
    id: 58118E89F3A912897C070ADBF76221572C52609D

- name: Add docker repo as a source
  apt_repository: 
    repo: "deb https://apt.dockerproject.org/repo ubuntu-xenial main"
    state: present
    update_cache: yes

- name: Install Docker
  apt: name={{ item }} state=present
  with_items:
      docker-engine

- name: Add the docker group
  group: name=docker gid=998 state=present

- name: Start Docker
  service: name=docker state=restarted
